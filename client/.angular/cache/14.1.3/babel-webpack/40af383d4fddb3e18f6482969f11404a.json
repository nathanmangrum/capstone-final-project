{"ast":null,"code":"import { ChangeDetectorRef } from '@angular/core';\nimport { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { Subject, takeUntil } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../services/tasting-group.service\";\nimport * as i3 from \"primeng/api\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"../services/member.service\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"primeng/panel\";\nimport * as i8 from \"primeng/button\";\nimport * as i9 from \"primeng/dialog\";\nimport * as i10 from \"primeng/toast\";\nimport * as i11 from \"primeng/table\";\nimport * as i12 from \"primeng/inputtext\";\nimport * as i13 from \"primeng/dropdown\";\nimport * as i14 from \"primeng/inputnumber\";\n\nfunction GroupsComponent_p_table_2_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelement(1, \"th\", 8);\n    i0.ɵɵelementStart(2, \"th\");\n    i0.ɵɵtext(3, \"Group Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"th\");\n    i0.ɵɵtext(5, \"Whiskey\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\");\n    i0.ɵɵtext(7, \"Tasting Host\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\");\n    i0.ɵɵtext(9, \"Member Count\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(10, \"th\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction GroupsComponent_p_table_2_ng_template_2_button_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function GroupsComponent_p_table_2_ng_template_2_button_12_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const groups_r8 = i0.ɵɵnextContext().$implicit;\n      const ctx_r12 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r12.editGroup(groups_r8));\n    });\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction GroupsComponent_p_table_2_ng_template_2_button_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 13);\n    i0.ɵɵlistener(\"click\", function GroupsComponent_p_table_2_ng_template_2_button_13_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r17);\n      const groups_r8 = i0.ɵɵnextContext().$implicit;\n      const ctx_r15 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r15.deleteGroup(groups_r8));\n    });\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction GroupsComponent_p_table_2_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵelement(2, \"button\", 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtemplate(12, GroupsComponent_p_table_2_ng_template_2_button_12_Template, 1, 0, \"button\", 10);\n    i0.ɵɵtemplate(13, GroupsComponent_p_table_2_ng_template_2_button_13_Template, 1, 0, \"button\", 11);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const groups_r8 = ctx.$implicit;\n    const expanded_r9 = ctx.expanded;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"pRowToggler\", groups_r8)(\"icon\", expanded_r9 ? \"pi pi-chevron-down\" : \"pi pi-chevron-right\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(groups_r8.GroupName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(groups_r8.OrganizationName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(groups_r8.SponsorName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(groups_r8.Members.length);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !expanded_r9);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !expanded_r9);\n  }\n}\n\nfunction GroupsComponent_p_table_2_ng_template_3_ng_template_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"th\");\n    i0.ɵɵtext(2, \"Member Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"th\");\n    i0.ɵɵtext(4, \"Member Email\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"th\");\n    i0.ɵɵtext(6, \"Member Phone\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(7, \"th\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction GroupsComponent_p_table_2_ng_template_3_ng_template_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r24 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\")(8, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function GroupsComponent_p_table_2_ng_template_3_ng_template_5_Template_button_click_8_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r24);\n      const member_r22 = restoredCtx.$implicit;\n      const groups_r18 = i0.ɵɵnextContext().$implicit;\n      const ctx_r23 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r23.editMember(member_r22, groups_r18));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"button\", 13);\n    i0.ɵɵlistener(\"click\", function GroupsComponent_p_table_2_ng_template_3_ng_template_5_Template_button_click_9_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r24);\n      const member_r22 = restoredCtx.$implicit;\n      const groups_r18 = i0.ɵɵnextContext().$implicit;\n      const ctx_r26 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r26.deleteMember(member_r22, groups_r18));\n    });\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const member_r22 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(member_r22.MemberName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(member_r22.MemberEmail);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(member_r22.MemberPhone);\n  }\n}\n\nfunction GroupsComponent_p_table_2_ng_template_3_ng_template_6_p_button_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r31 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"p-button\", 19);\n    i0.ɵɵlistener(\"onClick\", function GroupsComponent_p_table_2_ng_template_3_ng_template_6_p_button_0_Template_p_button_onClick_0_listener() {\n      i0.ɵɵrestoreView(_r31);\n      const groups_r18 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r29 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r29.addMember(groups_r18));\n    });\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction GroupsComponent_p_table_2_ng_template_3_ng_template_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, GroupsComponent_p_table_2_ng_template_3_ng_template_6_p_button_0_Template, 1, 0, \"p-button\", 18);\n  }\n\n  if (rf & 2) {\n    const ctx_r21 = i0.ɵɵnextContext(3);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r21.showDetails);\n  }\n}\n\nfunction GroupsComponent_p_table_2_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 14)(2, \"div\", 15)(3, \"p-table\", 16);\n    i0.ɵɵtemplate(4, GroupsComponent_p_table_2_ng_template_3_ng_template_4_Template, 8, 0, \"ng-template\", 5);\n    i0.ɵɵtemplate(5, GroupsComponent_p_table_2_ng_template_3_ng_template_5_Template, 10, 3, \"ng-template\", 6);\n    i0.ɵɵtemplate(6, GroupsComponent_p_table_2_ng_template_3_ng_template_6_Template, 1, 1, \"ng-template\", 17);\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const groups_r18 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"value\", groups_r18.Members)(\"scrollable\", true);\n  }\n}\n\nfunction GroupsComponent_p_table_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p-table\", 4);\n    i0.ɵɵtemplate(1, GroupsComponent_p_table_2_ng_template_1_Template, 11, 0, \"ng-template\", 5);\n    i0.ɵɵtemplate(2, GroupsComponent_p_table_2_ng_template_2_Template, 14, 8, \"ng-template\", 6);\n    i0.ɵɵtemplate(3, GroupsComponent_p_table_2_ng_template_3_Template, 7, 2, \"ng-template\", 7);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const groups_r4 = ctx.ngIf;\n    i0.ɵɵproperty(\"value\", groups_r4)(\"scrollable\", true);\n  }\n}\n\nfunction GroupsComponent_p_button_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r33 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"p-button\", 20);\n    i0.ɵɵlistener(\"onClick\", function GroupsComponent_p_button_4_Template_p_button_onClick_0_listener() {\n      i0.ɵɵrestoreView(_r33);\n      const ctx_r32 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r32.addGroup());\n    });\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction GroupsComponent_div_5_ng_template_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"form\", 23)(1, \"div\", 24)(2, \"label\", 25);\n    i0.ɵɵtext(3, \"Group Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(4, \"input\", 26);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 24)(6, \"label\");\n    i0.ɵɵtext(7, \"Tasting Host\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(8, \"input\", 27);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"div\", 24)(10, \"label\");\n    i0.ɵɵtext(11, \"Tasting Host Phone\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(12, \"input\", 28);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"div\", 24)(14, \"label\");\n    i0.ɵɵtext(15, \"Tasting Host Email\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(16, \"input\", 29);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"div\", 24)(18, \"label\");\n    i0.ɵɵtext(19, \"Organization Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(20, \"p-dropdown\", 30);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"div\", 24)(22, \"label\");\n    i0.ɵɵtext(23, \"Max Group Size\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(24, \"p-inputNumber\", 31);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r34 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"formGroup\", ctx_r34.addGroupForm);\n    i0.ɵɵadvance(20);\n    i0.ɵɵproperty(\"options\", ctx_r34.whiskeyOrganization);\n  }\n}\n\nfunction GroupsComponent_div_5_ng_template_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r37 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 32);\n    i0.ɵɵlistener(\"click\", function GroupsComponent_div_5_ng_template_5_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r37);\n      const ctx_r36 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r36.showAddGroup = false);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(1, \"button\", 33);\n    i0.ɵɵlistener(\"click\", function GroupsComponent_div_5_ng_template_5_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r37);\n      const ctx_r38 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r38.onSubmit());\n    });\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction GroupsComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r40 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\")(1, \"p-dialog\", 21);\n    i0.ɵɵlistener(\"visibleChange\", function GroupsComponent_div_5_Template_p_dialog_visibleChange_1_listener($event) {\n      i0.ɵɵrestoreView(_r40);\n      const ctx_r39 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r39.showAddGroup = $event);\n    });\n    i0.ɵɵelementStart(2, \"p-header\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, GroupsComponent_div_5_ng_template_4_Template, 25, 2, \"ng-template\", 22);\n    i0.ɵɵtemplate(5, GroupsComponent_div_5_ng_template_5_Template, 2, 0, \"ng-template\", 17);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"visible\", ctx_r2.showAddGroup)(\"modal\", true);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r2.modalHeader);\n  }\n}\n\nfunction GroupsComponent_div_6_ng_template_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"form\", 23)(1, \"div\", 24)(2, \"label\", 34);\n    i0.ɵɵtext(3, \"Member Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(4, \"input\", 35);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 24)(6, \"label\");\n    i0.ɵɵtext(7, \"Member Email\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(8, \"input\", 36);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"div\", 24)(10, \"label\");\n    i0.ɵɵtext(11, \"Member Phone\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(12, \"input\", 37);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r41 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"formGroup\", ctx_r41.addMemberForm);\n  }\n}\n\nfunction GroupsComponent_div_6_ng_template_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r44 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 32);\n    i0.ɵɵlistener(\"click\", function GroupsComponent_div_6_ng_template_5_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r44);\n      const ctx_r43 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r43.showMemberModal = false);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(1, \"button\", 33);\n    i0.ɵɵlistener(\"click\", function GroupsComponent_div_6_ng_template_5_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r44);\n      const ctx_r45 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r45.onSubmitMember());\n    });\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction GroupsComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r47 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\")(1, \"p-dialog\", 21);\n    i0.ɵɵlistener(\"visibleChange\", function GroupsComponent_div_6_Template_p_dialog_visibleChange_1_listener($event) {\n      i0.ɵɵrestoreView(_r47);\n      const ctx_r46 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r46.showMemberModal = $event);\n    });\n    i0.ɵɵelementStart(2, \"p-header\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, GroupsComponent_div_6_ng_template_4_Template, 13, 1, \"ng-template\", 22);\n    i0.ɵɵtemplate(5, GroupsComponent_div_6_ng_template_5_Template, 2, 0, \"ng-template\", 17);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"visible\", ctx_r3.showMemberModal)(\"modal\", true);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r3.memberModalHeader);\n  }\n}\n\nexport class GroupsComponent {\n  constructor(router, groupsService, messageService, changeDetector, fb, memberService, filterService) {\n    this.router = router;\n    this.groupsService = groupsService;\n    this.messageService = messageService;\n    this.changeDetector = changeDetector;\n    this.fb = fb;\n    this.memberService = memberService;\n    this.filterService = filterService;\n    this.showDetails = false;\n    this.showAddGroup = false;\n    this.showMemberModal = false;\n    this.modalHeader = '';\n    this.memberModalHeader = '';\n    this.isEdit = false;\n    this.isEditMember = false;\n    this.whiskeyOrganization = ['Scotch', 'Bourbon', 'Rye'];\n    this.ngDestroyed$ = new Subject();\n  }\n\n  ngOnInit() {\n    this.groups$ = this.groupsService.getAllTastingGroups();\n    console.log(this.groups$);\n    this.createAddGroupForm();\n    this.createMemberForm();\n  }\n\n  ngOnDestroy() {\n    this.ngDestroyed$.next(true);\n  }\n\n  addGroup() {\n    this.addGroupForm.reset();\n    this.showAddGroup = true;\n    this.isEdit = false;\n    this.modalHeader = 'Add Group';\n  }\n\n  addMember(groups) {\n    this.addMemberForm.reset();\n    this.selectedGroupForEdit = groups;\n    this.showMemberModal = true;\n    this.isEditMember = false;\n    this.memberModalHeader = 'Add Member';\n  }\n\n  createMemberForm() {\n    this.addMemberForm = new FormGroup({\n      MemberId: new FormControl(null),\n      MemberName: new FormControl(null, [Validators.required]),\n      MemberEmail: new FormControl(null, [Validators.required, Validators.email]),\n      MemberPhone: new FormControl(null, [Validators.required])\n    }, {\n      updateOn: 'blur'\n    });\n  }\n\n  createAddGroupForm() {\n    this.addGroupForm = new FormGroup({\n      GroupName: new FormControl(null, [Validators.required]),\n      SponsorName: new FormControl(null, [Validators.required]),\n      SponsorPhone: new FormControl(null, [Validators.required]),\n      SponsorEmail: new FormControl(null),\n      OrganizationName: new FormControl(null),\n      MaxGroupSize: new FormControl(null, [Validators.required])\n    }, {\n      updateOn: 'blur'\n    });\n  }\n\n  editGroup(groups) {\n    this.isEdit = true;\n    this.showAddGroup = true;\n    this.selectedGroupForEdit = groups;\n    this.addGroupForm.patchValue(this.selectedGroupForEdit);\n    this.modalHeader = 'Edit Group Details';\n  }\n\n  editMember(member, group) {\n    this.isEditMember = true;\n    this.showMemberModal = true;\n    this.selectedMemberForEdit = member;\n    this.selectedGroupForEdit = group;\n    this.addMemberForm.patchValue(this.selectedMemberForEdit);\n    this.memberModalHeader = 'Edit Member Details';\n  }\n\n  onSubmit() {\n    if (this.addGroupForm.valid) {\n      if (!this.isEdit) {\n        this.groupsService.addTastingGroup(this.addGroupForm.getRawValue()).pipe(takeUntil(this.ngDestroyed$)).subscribe(() => {\n          this.groups$ = this.groupsService.getAllTastingGroups();\n          this.messageService.add({\n            severity: 'success',\n            summary: 'Group Added',\n            detail: `${this.addGroupForm.getRawValue().GroupName} has been successfully added!`\n          });\n        });\n        this.showAddGroup = false;\n        this.changeDetector.detectChanges();\n      } else {\n        const editableGroup = this.addGroupForm.getRawValue();\n        editableGroup.GroupId = this.selectedGroupForEdit.GroupId;\n        this.groupsService.editTastingGroup(editableGroup).pipe(takeUntil(this.ngDestroyed$)).subscribe(() => {\n          this.groups$ = this.groupsService.getAllTastingGroups();\n          this.messageService.add({\n            severity: 'success',\n            summary: 'Tasting Group Updated',\n            detail: `${this.addGroupForm.getRawValue().GroupName} has been successfully updated!`\n          });\n          this.showAddGroup = false;\n          this.changeDetector.detectChanges();\n        });\n      }\n    }\n  }\n\n  onSubmitMember() {\n    if (this.addMemberForm.valid) {\n      if (!this.isEditMember) {\n        this.memberService.addMemberToTastingGroup(this.selectedGroupForEdit.GroupId, this.addMemberForm.getRawValue()).pipe(takeUntil(this.ngDestroyed$)).subscribe(() => {\n          this.groups$ = this.groupsService.getAllTastingGroups();\n          this.messageService.add({\n            severity: 'success',\n            summary: 'Member Added',\n            detail: `${this.addMemberForm.getRawValue().MemberName} has been successfully added to ${this.selectedGroupForEdit.GroupName}!`\n          });\n        });\n        this.showMemberModal = false;\n      } else {\n        console.log(this.selectedGroupForEdit.GroupId, this.addMemberForm.getRawValue());\n        this.memberService.editMemberInTastingGroup(this.selectedGroupForEdit.GroupId, this.addMemberForm.getRawValue()).pipe(takeUntil(this.ngDestroyed$)).subscribe(() => {\n          this.groups$ = this.groupsService.getAllTastingGroups();\n          this.messageService.add({\n            severity: 'success',\n            summary: 'Member Updated',\n            detail: `${this.addMemberForm.getRawValue().MemberName}'s details have been updated!`\n          });\n        });\n        this.showMemberModal = false;\n      }\n    }\n  }\n\n  deleteGroup(groups) {\n    this.groupsService.deleteTastingGroup(groups.GroupId).pipe(takeUntil(this.ngDestroyed$)).subscribe(res => {\n      this.messageService.add({\n        severity: 'success',\n        summary: 'Group Deleted',\n        detail: `${groups.GroupName} has been successfully deleted.`\n      });\n      this.groups$ = this.groupsService.getAllTastingGroups();\n    });\n    this.changeDetector.detectChanges();\n  }\n\n  deleteMember(member, group) {\n    this.memberService.deleteMemberFromTastingGroup(group.GroupId, member.MemberId).pipe(takeUntil(this.ngDestroyed$)).subscribe(res => {\n      if (res) {\n        this.messageService.add({\n          severity: 'success',\n          summary: 'Member Deleted',\n          detail: `${member.MemberName} has been successfully removed.`\n        });\n      }\n\n      this.groups$ = this.groupsService.getAllTastingGroups();\n    });\n  }\n\n}\n\nGroupsComponent.ɵfac = function GroupsComponent_Factory(t) {\n  return new (t || GroupsComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.TastingGroupService), i0.ɵɵdirectiveInject(i3.MessageService), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i4.FormBuilder), i0.ɵɵdirectiveInject(i5.MemberService), i0.ɵɵdirectiveInject(i3.FilterService));\n};\n\nGroupsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: GroupsComponent,\n  selectors: [[\"app-groups\"]],\n  decls: 7,\n  vars: 6,\n  consts: [[\"header\", \"Tasting Groups\"], [\"dataKey\", \"GroupName\", \"selectionMode\", \"single\", \"scrollHeight\", \"600px\", 3, \"value\", \"scrollable\", 4, \"ngIf\"], [\"label\", \"Add Tasting Group\", 3, \"onClick\", 4, \"ngIf\"], [4, \"ngIf\"], [\"dataKey\", \"GroupName\", \"selectionMode\", \"single\", \"scrollHeight\", \"600px\", 3, \"value\", \"scrollable\"], [\"pTemplate\", \"header\"], [\"pTemplate\", \"body\"], [\"pTemplate\", \"rowexpansion\"], [2, \"width\", \"3rem\"], [\"type\", \"button\", \"pButton\", \"\", \"pRipple\", \"\", 1, \"p-button-text\", \"p-button-rounded\", \"p-button-plain\", 3, \"pRowToggler\", \"icon\"], [\"pButton\", \"\", \"pRipple\", \"\", \"icon\", \"pi pi-pencil\", \"class\", \"p-button-rounded p-button-success mr-2\", 3, \"click\", 4, \"ngIf\"], [\"pButton\", \"\", \"pRipple\", \"\", \"icon\", \"pi pi-trash\", \"class\", \"p-button-rounded p-button-danger\", 3, \"click\", 4, \"ngIf\"], [\"pButton\", \"\", \"pRipple\", \"\", \"icon\", \"pi pi-pencil\", 1, \"p-button-rounded\", \"p-button-success\", \"mr-2\", 3, \"click\"], [\"pButton\", \"\", \"pRipple\", \"\", \"icon\", \"pi pi-trash\", 1, \"p-button-rounded\", \"p-button-danger\", 3, \"click\"], [\"colspan\", \"7\"], [1, \"p-3\", 2, \"width\", \"100%\"], [\"dataKey\", \"MemberName\", \"scrollHeight\", \"400px\", 3, \"value\", \"scrollable\"], [\"pTemplate\", \"footer\"], [\"class\", \"add-member-btn\", \"label\", \"Add Member\", 3, \"onClick\", 4, \"ngIf\"], [\"label\", \"Add Member\", 1, \"add-member-btn\", 3, \"onClick\"], [\"label\", \"Add Tasting Group\", 3, \"onClick\"], [\"styleClass\", \"p-fluid\", 3, \"visible\", \"modal\", \"visibleChange\"], [\"pTemplate\", \"content\"], [3, \"formGroup\"], [1, \"field\"], [\"for\", \"GroupName\"], [\"type\", \"text\", \"pInputText\", \"\", \"required\", \"\", \"formControlName\", \"GroupName\"], [\"type\", \"text\", \"pInputText\", \"\", \"required\", \"\", \"formControlName\", \"SponsorName\"], [\"type\", \"text\", \"pInputText\", \"\", \"required\", \"\", \"formControlName\", \"SponsorPhone\"], [\"type\", \"phone\", \"pInputText\", \"\", \"formControlName\", \"SponsorEmail\"], [\"placeholder\", \"Select an organization\", \"formControlName\", \"OrganizationName\", 3, \"options\"], [\"formControlName\", \"MaxGroupSize\"], [\"pButton\", \"\", \"pRipple\", \"\", \"label\", \"Cancel\", \"icon\", \"pi pi-times\", 1, \"p-button-text\", 3, \"click\"], [\"pButton\", \"\", \"pRipple\", \"\", \"label\", \"Save\", \"icon\", \"pi pi-check\", 1, \"p-button-text\", 3, \"click\"], [\"for\", \"MemberName\"], [\"type\", \"text\", \"pInputText\", \"\", \"required\", \"\", \"formControlName\", \"MemberName\"], [\"type\", \"text\", \"pInputText\", \"\", \"required\", \"\", \"formControlName\", \"MemberEmail\"], [\"type\", \"text\", \"pInputText\", \"\", \"required\", \"\", \"formControlName\", \"MemberPhone\"]],\n  template: function GroupsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"p-toast\");\n      i0.ɵɵelementStart(1, \"p-panel\", 0);\n      i0.ɵɵtemplate(2, GroupsComponent_p_table_2_Template, 4, 2, \"p-table\", 1);\n      i0.ɵɵpipe(3, \"async\");\n      i0.ɵɵtemplate(4, GroupsComponent_p_button_4_Template, 1, 0, \"p-button\", 2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(5, GroupsComponent_div_5_Template, 6, 3, \"div\", 3);\n      i0.ɵɵtemplate(6, GroupsComponent_div_6_Template, 6, 3, \"div\", 3);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(3, 4, ctx.groups$));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", !ctx.showDetails);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.showAddGroup);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.showMemberModal);\n    }\n  },\n  dependencies: [i6.NgIf, i3.Header, i3.PrimeTemplate, i7.Panel, i8.ButtonDirective, i8.Button, i9.Dialog, i10.Toast, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.FormGroupDirective, i4.FormControlName, i11.Table, i11.RowToggler, i12.InputText, i13.Dropdown, i14.InputNumber, i6.AsyncPipe],\n  styles: [\"[_nghost-%COMP%]   p-panel[_ngcontent-%COMP%]  .p-component {\\n  margin-top: 1rem;\\n}\\n[_nghost-%COMP%]   p-button[_ngcontent-%COMP%]     {\\n  display: flex;\\n  flex-direction: row-reverse;\\n}\\n[_nghost-%COMP%]   p-dialog[_ngcontent-%COMP%]     {\\n  min-height: 500px;\\n  min-width: 500px;\\n}\\n[_nghost-%COMP%]   .add-member-btn[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: row-reverse;\\n}\\n[_nghost-%COMP%]   p-table[_ngcontent-%COMP%]  tfoot {\\n  display: flex;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdyb3Vwcy5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFSTtFQUNFLGdCQUFBO0FBRE47QUFLRTtFQUNFLGFBQUE7RUFDQSwyQkFBQTtBQUhKO0FBTUU7RUFDRSxpQkFBQTtFQUNBLGdCQUFBO0FBSko7QUFPRTtFQUNFLGFBQUE7RUFDQSwyQkFBQTtBQUxKO0FBU0k7RUFDRSxhQUFBO0FBUE4iLCJmaWxlIjoiZ3JvdXBzLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiOmhvc3Qge1xuICBwLXBhbmVsOjpuZy1kZWVwIHtcbiAgICAucC1jb21wb25lbnQge1xuICAgICAgbWFyZ2luLXRvcDogMXJlbTtcbiAgICB9XG4gIH1cblxuICBwLWJ1dHRvbiA6Om5nLWRlZXAge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IHJvdy1yZXZlcnNlO1xuICB9XG5cbiAgcC1kaWFsb2cgOjpuZy1kZWVwIHtcbiAgICBtaW4taGVpZ2h0OiA1MDBweDtcbiAgICBtaW4td2lkdGg6IDUwMHB4O1xuICB9XG5cbiAgLmFkZC1tZW1iZXItYnRuIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiByb3ctcmV2ZXJzZTtcbiAgfVxuXG4gIHAtdGFibGU6Om5nLWRlZXAge1xuICAgIHRmb290IHtcbiAgICAgIGRpc3BsYXk6ZmxleFxuICAgIH1cbiAgfVxufVxuIl19 */\"]\n});","map":{"version":3,"mappings":"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","names":["ChangeDetectorRef","FormBuilder","FormControl","FormGroup","Validators","Subject","takeUntil","i0","expanded_r9","GroupsComponent","constructor","router","groupsService","messageService","changeDetector","fb","memberService","filterService","ngOnInit","groups$","getAllTastingGroups","console","log","createAddGroupForm","createMemberForm","ngOnDestroy","ngDestroyed$","next","addGroup","addGroupForm","reset","showAddGroup","isEdit","modalHeader","addMember","groups","addMemberForm","selectedGroupForEdit","showMemberModal","isEditMember","memberModalHeader","MemberId","MemberName","required","MemberEmail","email","MemberPhone","updateOn","GroupName","SponsorName","SponsorPhone","SponsorEmail","OrganizationName","MaxGroupSize","editGroup","patchValue","editMember","member","group","selectedMemberForEdit","onSubmit","valid","addTastingGroup","getRawValue","pipe","subscribe","add","severity","summary","detail","detectChanges","editableGroup","GroupId","editTastingGroup","onSubmitMember","addMemberToTastingGroup","editMemberInTastingGroup","deleteGroup","deleteTastingGroup","res","deleteMember","deleteMemberFromTastingGroup","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["/Users/jisajmk/Documents/capstone-final-project/client/src/app/groups/groups.component.ts","/Users/jisajmk/Documents/capstone-final-project/client/src/app/groups/groups.component.html"],"sourcesContent":["import { ChangeDetectorRef, Component, OnDestroy, OnInit } from '@angular/core';\nimport { FormBuilder, FormControl, FormGroup, SelectControlValueAccessor, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { FilterService, MessageService } from 'primeng/api';\nimport { Observable, Subject, takeUntil } from 'rxjs';\nimport { Member } from '../models/member';\nimport { TastingGroup } from '../models/tasting-group';\nimport { MemberService } from '../services/member.service';\nimport { TastingGroupService } from '../services/tasting-group.service';\n\n@Component({\n  selector: 'app-groups',\n  templateUrl: './groups.component.html',\n  styleUrls: ['./groups.component.scss']\n})\nexport class GroupsComponent implements OnInit, OnDestroy {\n\n  tastingGroups!: Array<TastingGroup>;\n  groups$!: Observable<TastingGroup[]>;\n  showDetails = false;\n  showAddGroup = false;\n  showMemberModal = false;\n  modalHeader = '';\n  memberModalHeader = '';\n  isEdit = false;\n  isEditMember = false;\n  selectedGroupForEdit!: TastingGroup;\n  selectedMemberForEdit!: Member;\n  addGroupForm!: FormGroup;\n  addMemberForm!: FormGroup;\n  whiskeyOrganization = ['Scotch', 'Bourbon', 'Rye'];\n  ngDestroyed$: Subject<boolean> = new Subject();\n\n  constructor(private readonly router: Router,\n              private readonly groupsService: TastingGroupService,\n              private readonly messageService: MessageService,\n              private readonly changeDetector: ChangeDetectorRef,\n              private readonly fb: FormBuilder,\n              private readonly memberService: MemberService,\n              private readonly filterService: FilterService) { }\n\n  ngOnInit(): void {\n    this.groups$ = this.groupsService.getAllTastingGroups();\n    console.log(this.groups$);\n    this.createAddGroupForm();\n    this.createMemberForm();\n  }\n\n  ngOnDestroy(): void {\n    this.ngDestroyed$.next(true);\n  }\n\n  addGroup() {\n    this.addGroupForm.reset();\n    this.showAddGroup = true;\n    this.isEdit = false;\n    this.modalHeader = 'Add Group';\n  }\n\n  addMember(groups: TastingGroup) {\n    this.addMemberForm.reset();\n    this.selectedGroupForEdit = groups;\n    this.showMemberModal = true;\n    this.isEditMember = false;\n    this.memberModalHeader = 'Add Member';\n  }\n\n  createMemberForm() {\n    this.addMemberForm = new FormGroup({\n      MemberId: new FormControl(null),\n      MemberName: new FormControl(null, [Validators.required]),\n      MemberEmail: new FormControl(null, [Validators.required, Validators.email]),\n      MemberPhone: new FormControl(null, [Validators.required])\n  }, { updateOn: 'blur' });\n  }\n\n  createAddGroupForm() {\n    this.addGroupForm = new FormGroup({\n      GroupName: new FormControl(null, [Validators.required]),\n      SponsorName: new FormControl(null, [Validators.required]),\n      SponsorPhone: new FormControl(null, [Validators.required]),\n      SponsorEmail: new FormControl(null),\n      OrganizationName: new FormControl(null),\n      MaxGroupSize: new FormControl(null, [Validators.required])\n    }, { updateOn: 'blur' });\n  }\n\n  editGroup(groups: TastingGroup) {\n    this.isEdit = true;\n    this.showAddGroup = true;\n    this.selectedGroupForEdit = groups;\n    this.addGroupForm.patchValue(this.selectedGroupForEdit);\n    this.modalHeader = 'Edit Group Details';\n  }\n\n  editMember(member: Member, group: TastingGroup) {\n    this.isEditMember = true;\n    this.showMemberModal = true;\n    this.selectedMemberForEdit = member;\n    this.selectedGroupForEdit = group;\n    this.addMemberForm.patchValue(this.selectedMemberForEdit);\n    this.memberModalHeader = 'Edit Member Details'\n  }\n\n  onSubmit() {\n    if (this.addGroupForm.valid) {\n      if (!this.isEdit) {\n        this.groupsService.addTastingGroup(this.addGroupForm.getRawValue()).pipe(takeUntil(this.ngDestroyed$)).subscribe(() => {\n          this.groups$ = this.groupsService.getAllTastingGroups();\n          this.messageService.add({\n            severity: 'success',\n            summary: 'Group Added',\n            detail:`${this.addGroupForm.getRawValue().GroupName} has been successfully added!`\n          });\n        });\n        this.showAddGroup = false;\n        this.changeDetector.detectChanges();\n      } else {\n        const editableGroup = this.addGroupForm.getRawValue();\n        editableGroup.GroupId = this.selectedGroupForEdit.GroupId;\n        this.groupsService.editTastingGroup(editableGroup).pipe(takeUntil(this.ngDestroyed$)).subscribe(() => {\n          this.groups$ = this.groupsService.getAllTastingGroups();\n          this.messageService.add({\n            severity: 'success',\n            summary: 'Tasting Group Updated',\n            detail:`${this.addGroupForm.getRawValue().GroupName} has been successfully updated!`\n          });\n          this.showAddGroup = false;\n          this.changeDetector.detectChanges();\n        })\n      }\n    }\n  }\n\n  onSubmitMember() {\n    if (this.addMemberForm.valid) {\n      if (!this.isEditMember) {\n        this.memberService.addMemberToTastingGroup(this.selectedGroupForEdit.GroupId, this.addMemberForm.getRawValue()).pipe(takeUntil(this.ngDestroyed$)).subscribe(() => {\n          this.groups$ = this.groupsService.getAllTastingGroups();\n          this.messageService.add({\n            severity: 'success',\n            summary:'Member Added',\n            detail: `${this.addMemberForm.getRawValue().MemberName} has been successfully added to ${this.selectedGroupForEdit.GroupName}!`\n          });\n        });\n        this.showMemberModal = false;\n      } else {\n        console.log(this.selectedGroupForEdit.GroupId, this.addMemberForm.getRawValue());\n        \n        this.memberService.editMemberInTastingGroup(this.selectedGroupForEdit.GroupId, this.addMemberForm.getRawValue()).pipe(takeUntil(this.ngDestroyed$)).subscribe(() => {\n          this.groups$ = this.groupsService.getAllTastingGroups();\n          this.messageService.add({\n            severity: 'success',\n            summary:'Member Updated',\n            detail: `${this.addMemberForm.getRawValue().MemberName}'s details have been updated!`\n          });\n        });\n        this.showMemberModal = false;\n      }\n    }\n  }\n\n  deleteGroup(groups: TastingGroup) {\n    this.groupsService.deleteTastingGroup(groups.GroupId).pipe(takeUntil(this.ngDestroyed$)).subscribe((res) => {\n      this.messageService.add({\n        severity: 'success',\n        summary: 'Group Deleted',\n        detail:`${groups.GroupName} has been successfully deleted.`\n      });\n      this.groups$ = this.groupsService.getAllTastingGroups();\n    });\n    this.changeDetector.detectChanges();\n  }\n\n  deleteMember(member: Member, group: TastingGroup) {\n    this.memberService.deleteMemberFromTastingGroup(group.GroupId, member.MemberId).pipe(takeUntil(this.ngDestroyed$)).subscribe((res) => {\n      if (res) {\n        this.messageService.add({\n          severity: 'success',\n          summary: 'Member Deleted',\n          detail: `${member.MemberName} has been successfully removed.`\n        });\n      }\n      this.groups$ = this.groupsService.getAllTastingGroups();\n    });\n  }\n}\n","<p-toast></p-toast>\n<p-panel header=\"Tasting Groups\">\n  <p-table *ngIf=\"groups$ | async as groups\"\n           [value]=\"groups\"\n           dataKey=\"GroupName\"\n           selectionMode=\"single\"\n           [scrollable]=\"true\"\n           scrollHeight=\"600px\">\n    <ng-template pTemplate=\"header\">\n      <tr>\n        <th style=\"width: 3rem\"></th>\n        <th>Group Name</th>\n        <th>Whiskey</th>\n        <th>Tasting Host</th>\n        <th>Member Count</th>\n        <th></th>\n      </tr>\n    </ng-template>\n    <ng-template pTemplate=\"body\" let-groups let-expanded=\"expanded\">\n      <tr>\n        <td>\n          <button type=\"button\" pButton pRipple [pRowToggler]=\"groups\" class=\"p-button-text p-button-rounded p-button-plain\" [icon]=\"expanded ? 'pi pi-chevron-down' : 'pi pi-chevron-right'\"></button>\n      </td>\n        <td>{{ groups.GroupName }}</td>\n        <td>{{ groups.OrganizationName }}</td>\n        <td>{{ groups.SponsorName }}</td>\n        <td>{{ groups.Members.length }}</td>\n        <td>\n          <button *ngIf=\"!expanded\" pButton pRipple icon=\"pi pi-pencil\" class=\"p-button-rounded p-button-success mr-2\" (click)=\"editGroup(groups)\"></button>\n          <button *ngIf=\"!expanded\" pButton pRipple icon=\"pi pi-trash\" class=\"p-button-rounded p-button-danger\" (click)=\"deleteGroup(groups)\"></button>\n        </td>\n      </tr>\n    </ng-template>\n    <ng-template pTemplate=\"rowexpansion\" let-groups>\n      <tr>\n        <td colspan=\"7\">\n          <div class=\"p-3\" style=\"width: 100%\">\n            <p-table [value]=\"groups.Members\" dataKey=\"MemberName\" [scrollable]=\"true\" scrollHeight=\"400px\">\n              <ng-template pTemplate=\"header\">\n                <tr>\n                  <th>Member Name</th>\n                  <th>Member Email</th>\n                  <th>Member Phone</th>\n                  <th></th>\n                </tr>\n              </ng-template>\n              <ng-template pTemplate=\"body\" let-member>\n                <tr>\n                  <td>{{ member.MemberName }}</td>\n                  <td>{{ member.MemberEmail }}</td>\n                  <td>{{ member.MemberPhone }}</td>\n                  <td>\n                    <button pButton pRipple icon=\"pi pi-pencil\" class=\"p-button-rounded p-button-success mr-2\" (click)=\"editMember(member, groups)\"></button>\n                    <button pButton pRipple icon=\"pi pi-trash\" class=\"p-button-rounded p-button-danger\" (click)=\"deleteMember(member, groups)\"></button>\n                  </td>\n                </tr>\n              </ng-template>\n              <ng-template pTemplate=\"footer\">\n                <p-button class=\"add-member-btn\" label=\"Add Member\" *ngIf=\"!showDetails\" (onClick)=\"addMember(groups)\"></p-button>\n              </ng-template>\n            </p-table>\n          </div>\n        </td>\n      </tr>\n    </ng-template>\n  </p-table>\n  <p-button label=\"Add Tasting Group\" *ngIf=\"!showDetails\" (onClick)=\"addGroup()\">\n\n  </p-button>\n</p-panel>\n<div *ngIf=\"showAddGroup\">\n  <p-dialog [(visible)]=\"showAddGroup\" [modal]=\"true\" styleClass=\"p-fluid\">\n    <p-header>{{ modalHeader }}</p-header>\n    <ng-template pTemplate=\"content\">\n      <form [formGroup]=\"addGroupForm\">\n        <div class=\"field\">\n          <label for=\"GroupName\">Group Name</label>\n          <input type=\"text\"\n                 pInputText\n                 required\n                 formControlName=\"GroupName\">\n        </div>\n        <div class=\"field\">\n          <label>Tasting Host</label>\n          <input type=\"text\"\n                 pInputText\n                 required\n                 formControlName=\"SponsorName\">\n        </div>\n        <div class=\"field\">\n          <label>Tasting Host Phone</label>\n          <input type=\"text\"\n                 pInputText\n                 required\n                 formControlName=\"SponsorPhone\">\n        </div>\n        <div class=\"field\">\n          <label>Tasting Host Email</label>\n          <input type=\"phone\"\n                 pInputText\n                 formControlName=\"SponsorEmail\">\n        </div>\n        <div class=\"field\">\n          <label>Organization Name</label>\n          <p-dropdown [options]=\"whiskeyOrganization\"\n                      placeholder=\"Select an organization\"\n                      formControlName=\"OrganizationName\"></p-dropdown>\n        </div>\n        <div class=\"field\">\n          <label>Max Group Size</label>\n          <p-inputNumber formControlName=\"MaxGroupSize\"></p-inputNumber>\n        </div>\n      </form>\n    </ng-template>\n    <ng-template pTemplate=\"footer\">\n      <button pButton pRipple label=\"Cancel\" icon=\"pi pi-times\" class=\"p-button-text\" (click)=\"showAddGroup = false\"></button>\n      <button pButton pRipple label=\"Save\" icon=\"pi pi-check\" class=\"p-button-text\" (click)=\"onSubmit()\"></button>\n    </ng-template>\n  </p-dialog>\n</div>\n<div *ngIf=\"showMemberModal\">\n  <p-dialog [(visible)]=\"showMemberModal\" [modal]=\"true\" styleClass=\"p-fluid\">\n    <p-header>{{ memberModalHeader }}</p-header>\n    <ng-template pTemplate=\"content\">\n      <form [formGroup]=\"addMemberForm\">\n        <div class=\"field\">\n          <label for=\"MemberName\">Member Name</label>\n          <input type=\"text\"\n                 pInputText\n                 required\n                 formControlName=\"MemberName\">\n        </div>\n        <div class=\"field\">\n          <label>Member Email</label>\n          <input type=\"text\"\n                 pInputText\n                 required\n                 formControlName=\"MemberEmail\">\n        </div>\n        <div class=\"field\">\n          <label>Member Phone</label>\n          <input type=\"text\"\n                 pInputText\n                 required\n                 formControlName=\"MemberPhone\">\n        </div>\n      </form>\n    </ng-template>\n    <ng-template pTemplate=\"footer\">\n      <button pButton pRipple label=\"Cancel\" icon=\"pi pi-times\" class=\"p-button-text\" (click)=\"showMemberModal = false\"></button>\n      <button pButton pRipple label=\"Save\" icon=\"pi pi-check\" class=\"p-button-text\" (click)=\"onSubmitMember()\"></button>\n    </ng-template>\n  </p-dialog>\n\n</div>\n"]},"metadata":{},"sourceType":"module"}