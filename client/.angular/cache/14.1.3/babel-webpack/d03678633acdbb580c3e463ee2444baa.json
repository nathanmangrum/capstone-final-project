{"ast":null,"code":"import { ChangeDetectorRef } from '@angular/core';\nimport { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { Subject, takeUntil } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../services/tasting-group.service\";\nimport * as i3 from \"primeng/api\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"primeng/panel\";\nimport * as i7 from \"primeng/button\";\nimport * as i8 from \"primeng/dialog\";\nimport * as i9 from \"primeng/toast\";\nimport * as i10 from \"primeng/table\";\nimport * as i11 from \"primeng/inputtext\";\nimport * as i12 from \"primeng/dropdown\";\nimport * as i13 from \"primeng/inputnumber\";\nimport * as i14 from \"../group-details/group-details.component\";\n\nfunction GroupsComponent_p_table_2_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"th\");\n    i0.ɵɵtext(2, \"Group Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"th\");\n    i0.ɵɵtext(4, \"Organization\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"th\");\n    i0.ɵɵtext(6, \"Sponsor\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\");\n    i0.ɵɵtext(8, \"Member Count\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(9, \"th\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction GroupsComponent_p_table_2_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\", 7)(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵelement(10, \"button\", 8);\n    i0.ɵɵelementStart(11, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function GroupsComponent_p_table_2_ng_template_2_Template_button_click_11_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const groups_r7 = restoredCtx.$implicit;\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r8.deleteGroup(groups_r7));\n    });\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const groups_r7 = ctx.$implicit;\n    i0.ɵɵproperty(\"pSelectableRow\", groups_r7);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(groups_r7.GroupName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(groups_r7.OrganizationName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(groups_r7.SponsorName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(groups_r7.Members.length);\n  }\n}\n\nfunction GroupsComponent_p_table_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"p-table\", 4);\n    i0.ɵɵlistener(\"selectionChange\", function GroupsComponent_p_table_2_Template_p_table_selectionChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.selectedGroup = $event);\n    })(\"onRowSelect\", function GroupsComponent_p_table_2_Template_p_table_onRowSelect_0_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.showGroupDetails($event.data));\n    })(\"onRowUnselect\", function GroupsComponent_p_table_2_Template_p_table_onRowUnselect_0_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.showDetails = false);\n    });\n    i0.ɵɵtemplate(1, GroupsComponent_p_table_2_ng_template_1_Template, 10, 0, \"ng-template\", 5);\n    i0.ɵɵtemplate(2, GroupsComponent_p_table_2_ng_template_2_Template, 12, 5, \"ng-template\", 6);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const groups_r4 = ctx.ngIf;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"value\", groups_r4)(\"selection\", ctx_r0.selectedGroup);\n  }\n}\n\nfunction GroupsComponent_p_button_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"p-button\", 10);\n    i0.ɵɵlistener(\"onClick\", function GroupsComponent_p_button_4_Template_p_button_onClick_0_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.showAddGroupModal());\n    });\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction GroupsComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"app-group-details\", 11);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"groupDetails\", ctx_r2.selectedGroup);\n  }\n}\n\nfunction GroupsComponent_div_6_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"form\", 15)(1, \"div\", 16)(2, \"label\", 17);\n    i0.ɵɵtext(3, \"Group Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(4, \"input\", 18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 16)(6, \"label\");\n    i0.ɵɵtext(7, \"Sponsor Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(8, \"input\", 19);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"div\", 16)(10, \"label\");\n    i0.ɵɵtext(11, \"Sponsor Phone\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(12, \"input\", 20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"div\", 16)(14, \"label\");\n    i0.ɵɵtext(15, \"Sponsor Email\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(16, \"input\", 21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"div\", 16)(18, \"label\");\n    i0.ɵɵtext(19, \"Organization Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(20, \"p-dropdown\", 22);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"div\", 16)(22, \"label\");\n    i0.ɵɵtext(23, \"Max Group Size\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(24, \"p-inputNumber\", 23);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r16 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"formGroup\", ctx_r16.addGroupForm);\n    i0.ɵɵadvance(20);\n    i0.ɵɵproperty(\"options\", ctx_r16.whiskeyOrganization);\n  }\n}\n\nfunction GroupsComponent_div_6_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 24);\n    i0.ɵɵlistener(\"click\", function GroupsComponent_div_6_ng_template_3_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r19);\n      const ctx_r18 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r18.showAddGroup = false);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(1, \"button\", 25);\n    i0.ɵɵlistener(\"click\", function GroupsComponent_div_6_ng_template_3_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r19);\n      const ctx_r20 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r20.onSubmit());\n    });\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction GroupsComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r22 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\")(1, \"p-dialog\", 12);\n    i0.ɵɵlistener(\"visibleChange\", function GroupsComponent_div_6_Template_p_dialog_visibleChange_1_listener($event) {\n      i0.ɵɵrestoreView(_r22);\n      const ctx_r21 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r21.showAddGroup = $event);\n    });\n    i0.ɵɵtemplate(2, GroupsComponent_div_6_ng_template_2_Template, 25, 2, \"ng-template\", 13);\n    i0.ɵɵtemplate(3, GroupsComponent_div_6_ng_template_3_Template, 2, 0, \"ng-template\", 14);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"visible\", ctx_r3.showAddGroup)(\"modal\", true);\n  }\n}\n\nexport class GroupsComponent {\n  constructor(router, groupsService, messageService, changeDetector, fb) {\n    this.router = router;\n    this.groupsService = groupsService;\n    this.messageService = messageService;\n    this.changeDetector = changeDetector;\n    this.fb = fb;\n    this.showDetails = false;\n    this.showAddGroup = false;\n    this.whiskeyOrganization = ['Scotch', 'Bourbon', 'Rye'];\n    this.ngDestroyed$ = new Subject();\n  }\n\n  ngOnInit() {\n    this.groups$ = this.groupsService.getAllTastingGroups();\n    console.log(this.groups$);\n    this.createAddGroupForm();\n  }\n\n  ngOnDestroy() {\n    this.ngDestroyed$.next(true);\n  }\n\n  showGroupDetails(group) {\n    this.showDetails = true;\n    this.selectedGroup = group;\n  }\n\n  showAddGroupModal() {\n    this.showAddGroup = true;\n    console.log(this.showAddGroup);\n  }\n\n  createAddGroupForm() {\n    this.addGroupForm = new FormGroup({\n      GroupName: new FormControl(null, [Validators.required]),\n      SponsorName: new FormControl(null, [Validators.required]),\n      SponsorPhone: new FormControl(null, [Validators.required]),\n      SponsorEmail: new FormControl(null),\n      OrganizationName: new FormControl(null),\n      MaxGroupSize: new FormControl(null, [Validators.required])\n    }, {\n      updateOn: 'blur'\n    });\n  }\n\n  onSubmit() {\n    console.log(this.addGroupForm.getRawValue());\n\n    if (this.addGroupForm.valid) {\n      this.groupsService.addTastingGroup(this.addGroupForm.getRawValue().pipe(takeUntil(this.ngDestroyed$)).subscribe(() => {\n        this.groupsService.getAllTastingGroups();\n        this.messageService.add({\n          severity: 'success',\n          summary: 'Group Added',\n          detail: `${this.addGroupForm.getRawValue().GroupName} has been successfully added!`\n        });\n      }));\n      this.showAddGroup = false;\n    }\n  }\n\n  deleteGroup(groups) {\n    this.groupsService.deleteTastingGroup(groups.GroupId);\n    console.log(groups.GroupId);\n    this.messageService.add({\n      severity: 'success',\n      summary: 'Group Deleted',\n      detail: `${groups.GroupName} has been successfully deleted.`\n    });\n    this.changeDetector.detectChanges();\n  }\n\n}\n\nGroupsComponent.ɵfac = function GroupsComponent_Factory(t) {\n  return new (t || GroupsComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.TastingGroupService), i0.ɵɵdirectiveInject(i3.MessageService), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i4.FormBuilder));\n};\n\nGroupsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: GroupsComponent,\n  selectors: [[\"app-groups\"]],\n  decls: 7,\n  vars: 6,\n  consts: [[\"header\", \"Tasting Groups\"], [\"selectionMode\", \"single\", 3, \"value\", \"selection\", \"selectionChange\", \"onRowSelect\", \"onRowUnselect\", 4, \"ngIf\"], [\"label\", \"Add Group\", 3, \"onClick\", 4, \"ngIf\"], [4, \"ngIf\"], [\"selectionMode\", \"single\", 3, \"value\", \"selection\", \"selectionChange\", \"onRowSelect\", \"onRowUnselect\"], [\"pTemplate\", \"header\"], [\"pTemplate\", \"body\"], [3, \"pSelectableRow\"], [\"pButton\", \"\", \"pRipple\", \"\", \"icon\", \"pi pi-pencil\", 1, \"p-button-rounded\", \"p-button-success\", \"mr-2\"], [\"pButton\", \"\", \"pRipple\", \"\", \"icon\", \"pi pi-trash\", 1, \"p-button-rounded\", \"p-button-danger\", 3, \"click\"], [\"label\", \"Add Group\", 3, \"onClick\"], [3, \"groupDetails\"], [\"header\", \"Add Group\", \"styleClass\", \"p-fluid\", 3, \"visible\", \"modal\", \"visibleChange\"], [\"pTemplate\", \"content\"], [\"pTemplate\", \"footer\"], [3, \"formGroup\"], [1, \"field\"], [\"for\", \"GroupName\"], [\"type\", \"text\", \"pInputText\", \"\", \"required\", \"\", \"formControlName\", \"GroupName\"], [\"type\", \"text\", \"pInputText\", \"\", \"required\", \"\", \"formControlName\", \"SponsorName\"], [\"type\", \"text\", \"pInputText\", \"\", \"required\", \"\", \"formControlName\", \"SponsorPhone\"], [\"type\", \"phone\", \"pInputText\", \"\", \"formControlName\", \"SponsorEmail\"], [\"placeholder\", \"Select an organization\", \"formControlName\", \"OrganizationName\", 3, \"options\"], [\"formControlName\", \"MaxGroupSize\"], [\"pButton\", \"\", \"pRipple\", \"\", \"label\", \"Cancel\", \"icon\", \"pi pi-times\", 1, \"p-button-text\", 3, \"click\"], [\"pButton\", \"\", \"pRipple\", \"\", \"label\", \"Save\", \"icon\", \"pi pi-check\", 1, \"p-button-text\", 3, \"click\"]],\n  template: function GroupsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"p-toast\");\n      i0.ɵɵelementStart(1, \"p-panel\", 0);\n      i0.ɵɵtemplate(2, GroupsComponent_p_table_2_Template, 3, 2, \"p-table\", 1);\n      i0.ɵɵpipe(3, \"async\");\n      i0.ɵɵtemplate(4, GroupsComponent_p_button_4_Template, 1, 0, \"p-button\", 2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(5, GroupsComponent_div_5_Template, 2, 1, \"div\", 3);\n      i0.ɵɵtemplate(6, GroupsComponent_div_6_Template, 4, 2, \"div\", 3);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(3, 4, ctx.groups$));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", !ctx.showDetails);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.showDetails);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.showAddGroup);\n    }\n  },\n  dependencies: [i5.NgIf, i3.PrimeTemplate, i6.Panel, i7.ButtonDirective, i7.Button, i8.Dialog, i9.Toast, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.FormGroupDirective, i4.FormControlName, i10.Table, i10.SelectableRow, i11.InputText, i12.Dropdown, i13.InputNumber, i14.GroupDetailsComponent, i5.AsyncPipe],\n  styles: [\"[_nghost-%COMP%]   p-panel[_ngcontent-%COMP%]  .p-component {\\n  margin-top: 1rem;\\n}\\n[_nghost-%COMP%]   p-button[_ngcontent-%COMP%]     {\\n  display: flex;\\n  flex-direction: row-reverse;\\n}\\n[_nghost-%COMP%]   p-dialog[_ngcontent-%COMP%]     {\\n  min-height: 500px;\\n  min-width: 500px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdyb3Vwcy5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFSTtFQUNFLGdCQUFBO0FBRE47QUFLRTtFQUNFLGFBQUE7RUFDQSwyQkFBQTtBQUhKO0FBTUU7RUFDRSxpQkFBQTtFQUNBLGdCQUFBO0FBSkoiLCJmaWxlIjoiZ3JvdXBzLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiOmhvc3Qge1xuICBwLXBhbmVsOjpuZy1kZWVwIHtcbiAgICAucC1jb21wb25lbnQge1xuICAgICAgbWFyZ2luLXRvcDogMXJlbTtcbiAgICB9XG4gIH1cblxuICBwLWJ1dHRvbiA6Om5nLWRlZXAge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IHJvdy1yZXZlcnNlO1xuICB9XG5cbiAgcC1kaWFsb2cgOjpuZy1kZWVwIHtcbiAgICBtaW4taGVpZ2h0OiA1MDBweDtcbiAgICBtaW4td2lkdGg6IDUwMHB4O1xuICB9XG59XG4iXX0= */\"]\n});","map":{"version":3,"mappings":"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","names":["ChangeDetectorRef","FormBuilder","FormControl","FormGroup","Validators","Subject","takeUntil","i0","ctx_r0","GroupsComponent","constructor","router","groupsService","messageService","changeDetector","fb","ngOnInit","groups$","getAllTastingGroups","console","log","createAddGroupForm","ngOnDestroy","ngDestroyed$","next","showGroupDetails","group","showDetails","selectedGroup","showAddGroupModal","showAddGroup","addGroupForm","GroupName","required","SponsorName","SponsorPhone","SponsorEmail","OrganizationName","MaxGroupSize","updateOn","onSubmit","getRawValue","valid","addTastingGroup","pipe","subscribe","add","severity","summary","detail","deleteGroup","groups","deleteTastingGroup","GroupId","detectChanges","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["/Users/jisajmk/Documents/capstone-final-project/client/src/app/groups/groups.component.ts","/Users/jisajmk/Documents/capstone-final-project/client/src/app/groups/groups.component.html"],"sourcesContent":["import { ChangeDetectorRef, Component, OnDestroy, OnInit } from '@angular/core';\nimport { FormBuilder, FormControl, FormGroup, SelectControlValueAccessor, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { MessageService } from 'primeng/api';\nimport { Observable, Subject, takeUntil } from 'rxjs';\nimport { TastingGroup } from '../models/tasting-group';\nimport { TastingGroupService } from '../services/tasting-group.service';\n\n@Component({\n  selector: 'app-groups',\n  templateUrl: './groups.component.html',\n  styleUrls: ['./groups.component.scss']\n})\nexport class GroupsComponent implements OnInit, OnDestroy {\n\n  tastingGroups!: Array<TastingGroup>;\n  groups$!: Observable<TastingGroup[]>;\n  selectedGroup!: TastingGroup;\n  showDetails = false;\n  showAddGroup = false;\n  addGroupForm!: FormGroup;\n  whiskeyOrganization = ['Scotch', 'Bourbon', 'Rye'];\n  ngDestroyed$: Subject<boolean> = new Subject();\n\n  constructor(private readonly router: Router,\n              private readonly groupsService: TastingGroupService,\n              private readonly messageService: MessageService,\n              private readonly changeDetector: ChangeDetectorRef,\n              private readonly fb: FormBuilder) { }\n\n  ngOnInit(): void {\n    this.groups$ = this.groupsService.getAllTastingGroups();\n    console.log(this.groups$);\n    this.createAddGroupForm();\n  }\n\n  ngOnDestroy(): void {\n    this.ngDestroyed$.next(true);\n  }\n\n  showGroupDetails(group: TastingGroup) {\n    this.showDetails = true;\n    this.selectedGroup = group;\n  }\n\n  showAddGroupModal() {\n    this.showAddGroup = true;\n    console.log(this.showAddGroup);\n  }\n\n  createAddGroupForm() {\n    this.addGroupForm = new FormGroup({\n      GroupName: new FormControl(null, [Validators.required]),\n      SponsorName: new FormControl(null, [Validators.required]),\n      SponsorPhone: new FormControl(null, [Validators.required]),\n      SponsorEmail: new FormControl(null),\n      OrganizationName: new FormControl(null),\n      MaxGroupSize: new FormControl(null, [Validators.required])\n    }, { updateOn: 'blur' });\n  }\n\n  onSubmit() {\n    console.log(this.addGroupForm.getRawValue());\n    if (this.addGroupForm.valid) {\n      this.groupsService.addTastingGroup(this.addGroupForm.getRawValue().pipe(takeUntil(this.ngDestroyed$)).subscribe(() => {\n        this.groupsService.getAllTastingGroups();\n        this.messageService.add({\n          severity: 'success',\n          summary: 'Group Added',\n          detail:`${this.addGroupForm.getRawValue().GroupName} has been successfully added!`\n        });\n      }));\n      this.showAddGroup = false;\n    }\n  }\n\n  deleteGroup(groups: TastingGroup) {\n    this.groupsService.deleteTastingGroup(groups.GroupId);\n    console.log(groups.GroupId);\n    this.messageService.add({\n      severity: 'success',\n      summary: 'Group Deleted',\n      detail:`${groups.GroupName} has been successfully deleted.`\n    });\n    this.changeDetector.detectChanges();\n  }\n}\n","<p-toast></p-toast>\n<p-panel header=\"Tasting Groups\">\n  <p-table *ngIf=\"groups$ | async as groups\"\n           [value]=\"groups\"\n           selectionMode=\"single\"\n           [(selection)]=\"selectedGroup\"\n           (onRowSelect)=\"showGroupDetails($event.data)\"\n           (onRowUnselect)=\"showDetails = false\">\n    <ng-template pTemplate=\"header\">\n      <tr>\n        <th>Group Name</th>\n        <th>Organization</th>\n        <th>Sponsor</th>\n        <th>Member Count</th>\n        <th></th>\n      </tr>\n    </ng-template>\n    <ng-template pTemplate=\"body\" let-groups>\n      <tr [pSelectableRow]=\"groups\">\n        <td>{{ groups.GroupName }}</td>\n        <td>{{ groups.OrganizationName }}</td>\n        <td>{{ groups.SponsorName }}</td>\n        <td>{{ groups.Members.length }}</td>\n        <td>\n          <button pButton pRipple icon=\"pi pi-pencil\" class=\"p-button-rounded p-button-success mr-2\"></button>\n          <button pButton pRipple icon=\"pi pi-trash\" class=\"p-button-rounded p-button-danger\" (click)=\"deleteGroup(groups)\"></button>\n        </td>\n      </tr>\n    </ng-template>\n  </p-table>\n  <p-button label=\"Add Group\" *ngIf=\"!showDetails\" (onClick)=\"showAddGroupModal()\">\n\n  </p-button>\n</p-panel>\n<div *ngIf=\"showDetails\">\n  <app-group-details [groupDetails]=\"selectedGroup\"></app-group-details>\n</div>\n<div *ngIf=\"showAddGroup\">\n  <p-dialog header=\"Add Group\" [(visible)]=\"showAddGroup\" [modal]=\"true\" styleClass=\"p-fluid\">\n    <ng-template pTemplate=\"content\">\n      <form [formGroup]=\"addGroupForm\">\n        <div class=\"field\">\n          <label for=\"GroupName\">Group Name</label>\n          <input type=\"text\"\n                 pInputText\n                 required\n                 formControlName=\"GroupName\">\n        </div>\n        <div class=\"field\">\n          <label>Sponsor Name</label>\n          <input type=\"text\"\n                 pInputText\n                 required\n                 formControlName=\"SponsorName\">\n        </div>\n        <div class=\"field\">\n          <label>Sponsor Phone</label>\n          <input type=\"text\"\n                 pInputText\n                 required\n                 formControlName=\"SponsorPhone\">\n        </div>\n        <div class=\"field\">\n          <label>Sponsor Email</label>\n          <input type=\"phone\"\n                 pInputText\n                 formControlName=\"SponsorEmail\">\n        </div>\n        <div class=\"field\">\n          <label>Organization Name</label>\n          <p-dropdown [options]=\"whiskeyOrganization\"\n                      placeholder=\"Select an organization\"\n                      formControlName=\"OrganizationName\"></p-dropdown>\n        </div>\n        <div class=\"field\">\n          <label>Max Group Size</label>\n          <p-inputNumber formControlName=\"MaxGroupSize\"></p-inputNumber>\n        </div>\n      </form>\n    </ng-template>\n    <ng-template pTemplate=\"footer\">\n      <button pButton pRipple label=\"Cancel\" icon=\"pi pi-times\" class=\"p-button-text\" (click)=\"showAddGroup = false\"></button>\n      <button pButton pRipple label=\"Save\" icon=\"pi pi-check\" class=\"p-button-text\" (click)=\"onSubmit()\"></button>\n    </ng-template>\n  </p-dialog>\n</div>\n"]},"metadata":{},"sourceType":"module"}